import{j as i,c as P,w as I,a as T,b as t,d as q,h as N,t as a,f as y,g as r,o as l,F as h,m as w,i as B,n as V,p as A}from"./app-BJyzYjmY.js";import{_ as L}from"./AuthenticatedLayout-DUVj005y.js";import"./ApplicationLogo-B9e2fUTt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"py-8"},U={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6"},z={class:"grid gap-4 md:grid-cols-4"},F={class:"rounded-2xl border border-slate-800 bg-slate-950/70 p-4 shadow-sm shadow-slate-900/40"},H={class:"mt-3 text-3xl font-semibold text-slate-50"},M={class:"rounded-2xl border border-slate-800 bg-slate-950/70 p-4 shadow-sm shadow-slate-900/40"},R={class:"mt-3 text-3xl font-semibold text-slate-50"},O={class:"rounded-2xl border border-slate-800 bg-slate-950/70 p-4 shadow-sm shadow-slate-900/40"},G={class:"mt-3 text-3xl font-semibold text-slate-50"},J={class:"rounded-2xl border border-rose-800/80 bg-gradient-to-br from-rose-900/70 via-rose-900/40 to-slate-950/80 p-4 shadow-md shadow-rose-900/40"},K={class:"mt-3 text-3xl font-semibold text-rose-50"},Q={class:"mt-3 flex flex-wrap gap-2 text-[11px]"},W={class:"inline-flex items-center rounded-full bg-amber-500/15 px-2 py-0.5 font-medium text-amber-100 border border-amber-500/50"},X={class:"ml-1 font-semibold"},Y={class:"inline-flex items-center rounded-full bg-rose-500/20 px-2 py-0.5 font-medium text-rose-50 border border-rose-500/70"},Z={class:"ml-1 font-semibold"},tt={class:"km-card overflow-hidden"},et={class:"px-6 py-4 border-b border-slate-800/80 flex items-center justify-between"},st={class:"text-xs text-slate-400"},ot={key:0,class:"p-6 text-sm text-slate-400"},at={key:1,class:"overflow-x-auto"},nt={class:"km-table"},lt={class:"whitespace-nowrap text-sm font-medium text-slate-50"},rt={class:"whitespace-nowrap text-sm text-slate-300"},dt={class:"whitespace-nowrap text-sm text-slate-200"},it={class:"whitespace-nowrap text-sm text-slate-200"},ct={class:"whitespace-nowrap text-sm text-slate-300"},ut={class:"km-card overflow-hidden"},pt={class:"px-6 py-4 border-b border-slate-800/80 flex items-center justify-between"},xt={class:"text-xs text-slate-400"},mt={key:0,class:"p-6 text-sm text-slate-400"},ft={key:1,class:"overflow-x-auto"},bt={class:"km-table"},_t={class:"whitespace-nowrap text-sm font-medium text-slate-50"},yt={class:"whitespace-nowrap text-sm text-slate-300"},ht={class:"whitespace-nowrap text-sm text-slate-200"},wt={class:"whitespace-nowrap text-sm text-slate-300"},gt={class:"whitespace-nowrap text-sm"},Et={__name:"Dashboard",props:{stats:{type:Object,default:()=>({})},lowStockItems:{type:Array,default:()=>[]},soonExpiringItems:{type:Array,default:()=>[]}},setup(p){const d=p,g=i(()=>{var s;return((s=d.stats)==null?void 0:s.products_count)??0}),v=i(()=>{var s;return((s=d.stats)==null?void 0:s.locations_count)??0}),k=i(()=>{var s;return((s=d.stats)==null?void 0:s.stock_items_count)??0}),x=i(()=>{var s;return((s=d.stats)==null?void 0:s.low_stock_count)??0}),m=i(()=>{var s;return((s=d.stats)==null?void 0:s.soon_expiring_count)??0}),C=i(()=>{var s;return((s=d.stats)==null?void 0:s.urgent_expiring_count)??0}),S=i(()=>d.lowStockItems.length>0),E=i(()=>d.soonExpiringItems.length>0),u=s=>{if(!s.expires_at)return null;const e=new Date,o=new Date(s.expires_at);e.setHours(0,0,0,0),o.setHours(0,0,0,0);const c=o.getTime()-e.getTime(),n=Math.round(c/(1e3*60*60*24));return n<0?{type:"expired",days:n}:n===0?{type:"today",days:0}:n<=2?{type:"urgent",days:n}:n<=7?{type:"soon",days:n}:{type:"normal",days:n}},j=s=>s?s.type==="expired"?"Caducado":s.type==="today"?"Caduca hoy":s.type==="urgent"?`Caduca en ${s.days} dÃ­a${s.days===1?"":"s"}`:s.type==="soon"?`Caduca en ${s.days} dÃ­as`:"":"",D=()=>{A.get(route("stock.index"),{},{preserveState:!1,preserveScroll:!1,replace:!1})};return(s,e)=>(l(),P(L,null,{default:I(()=>[T(q(N),{title:"Panel"}),t("div",$,[t("div",U,[e[14]||(e[14]=t("div",{class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},[t("div",null,[t("h1",{class:"text-2xl font-semibold text-slate-50"}," Panel "),t("p",{class:"mt-1 text-sm text-slate-400"}," Resumen rÃ¡pido de tu despensa: productos, ubicaciones, stock bajo mÃ­nimo y prÃ³ximas caducidades. ")])],-1)),t("div",z,[t("div",F,[e[0]||(e[0]=t("p",{class:"text-xs font-medium uppercase tracking-wide text-slate-400"}," Productos ",-1)),t("p",H,a(g.value),1),e[1]||(e[1]=t("p",{class:"mt-1 text-xs text-slate-400"}," Elementos configurados en tu catÃ¡logo. ",-1))]),t("div",M,[e[2]||(e[2]=t("p",{class:"text-xs font-medium uppercase tracking-wide text-slate-400"}," Ubicaciones ",-1)),t("p",R,a(v.value),1),e[3]||(e[3]=t("p",{class:"mt-1 text-xs text-slate-400"}," Neveras, congeladores, armarios, estanterÃ­as... ",-1))]),t("div",O,[e[4]||(e[4]=t("p",{class:"text-xs font-medium uppercase tracking-wide text-slate-400"}," Registros de stock ",-1)),t("p",G,a(k.value),1),e[5]||(e[5]=t("p",{class:"mt-1 text-xs text-slate-400"}," Entradas de stock registradas. ",-1))]),t("div",J,[e[8]||(e[8]=t("p",{class:"text-xs font-medium uppercase tracking-wide text-rose-100"}," Bajo mÃ­nimo ",-1)),t("p",K,a(x.value),1),e[9]||(e[9]=t("p",{class:"mt-1 text-xs text-rose-100/80"}," Productos que necesitan reponerse. ",-1)),t("div",Q,[t("span",W,[e[6]||(e[6]=y(" Caducan â‰¤ 7 dÃ­as: ",-1)),t("span",X,a(m.value),1)]),t("span",Y,[e[7]||(e[7]=y(" De ellos, â‰¤ 2 dÃ­as: ",-1)),t("span",Z,a(C.value),1)])]),t("div",{class:"mt-4"},[t("button",{type:"button",onClick:D,class:"text-xs font-medium text-rose-100 underline-offset-2 hover:underline"}," Ver lista de reposiciÃ³n â†’ ")])])]),t("div",tt,[t("div",et,[e[10]||(e[10]=t("h2",{class:"text-sm font-semibold text-slate-100"}," Productos bajo mÃ­nimo recientes ",-1)),t("span",st," Total: "+a(x.value),1)]),S.value?(l(),r("div",at,[t("table",nt,[e[11]||(e[11]=t("thead",null,[t("tr",null,[t("th",null,"Producto"),t("th",null,"UbicaciÃ³n"),t("th",null,"Cantidad"),t("th",null,"MÃ­nimo"),t("th",null,"Actualizado")])],-1)),t("tbody",null,[(l(!0),r(h,null,w(p.lowStockItems,o=>{var c,n;return l(),r("tr",{key:o.id},[t("td",lt,a(((c=o.product)==null?void 0:c.name)??"â€”"),1),t("td",rt,a(((n=o.location)==null?void 0:n.name)??"Sin ubicaciÃ³n"),1),t("td",dt,a(o.quantity)+" "+a(o.unit),1),t("td",it,a(o.min_quantity),1),t("td",ct,a(o.updated_at?o.updated_at.substring(0,10):"â€”"),1)])}),128))])])])):(l(),r("div",ot," De momento no hay productos por debajo del mÃ­nimo. âœ… "))]),t("div",ut,[t("div",pt,[e[12]||(e[12]=t("h2",{class:"text-sm font-semibold text-slate-100"}," PrÃ³ximas caducidades (â‰¤ 7 dÃ­as) ",-1)),t("span",xt," Total: "+a(m.value),1)]),E.value?(l(),r("div",ft,[t("table",bt,[e[13]||(e[13]=t("thead",null,[t("tr",null,[t("th",null,"Producto"),t("th",null,"UbicaciÃ³n"),t("th",null,"Cantidad"),t("th",null,"Caduca"),t("th",null,"Aviso")])],-1)),t("tbody",null,[(l(!0),r(h,null,w(p.soonExpiringItems,o=>{var c,n,f,b,_;return l(),r("tr",{key:o.id},[t("td",_t,a(((c=o.product)==null?void 0:c.name)??"â€”"),1),t("td",yt,a(((n=o.location)==null?void 0:n.name)??"Sin ubicaciÃ³n"),1),t("td",ht,a(o.quantity)+" "+a(o.unit),1),t("td",wt,a(o.expires_at?o.expires_at.substring(0,10):"â€”"),1),t("td",gt,[u(o)?(l(),r("span",{key:0,class:V(["inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium border",((f=u(o))==null?void 0:f.type)==="expired"||((b=u(o))==null?void 0:b.type)==="urgent"||((_=u(o))==null?void 0:_.type)==="today"?"bg-rose-500/10 text-rose-200 border-rose-500/60":"bg-amber-500/10 text-amber-100 border-amber-500/60"])},a(j(u(o))),3)):B("",!0)])])}),128))])])])):(l(),r("div",mt," No hay productos que caduquen en los prÃ³ximos 7 dÃ­as. ðŸ™‚ "))])])])]),_:1}))}};export{Et as default};
