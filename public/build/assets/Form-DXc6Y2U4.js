import{j as b,u as S,E as U,c as V,w as k,a as d,b as e,d as l,h as E,t as u,l as N,f as C,e as M,k as a,g as m,o as r,F as y,m as _,C as v,q as f,v as B}from"./app-BdikBsVb.js";import{_ as F}from"./AuthenticatedLayout-B32SvYaY.js";import{_ as n}from"./InputError-BJNjovGb.js";import"./ApplicationLogo-mKXQLwup.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"py-10"},T={class:"mx-auto max-w-5xl px-4 sm:px-6 lg:px-8 space-y-6"},L={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},z={class:"text-2xl font-semibold text-slate-50"},A={class:"mx-auto max-w-4xl rounded-2xl border border-slate-200 bg-white/95 p-6 shadow-xl shadow-slate-900/20 text-slate-900"},D={class:"grid gap-6 md:grid-cols-3"},G={class:"md:col-span-2 space-y-1"},P=["value"],$={class:"space-y-1"},R={class:"grid gap-6 md:grid-cols-3"},H={class:"space-y-1"},J=["value"],K={class:"space-y-1"},Q=["value"],W={class:"space-y-1"},X={class:"grid gap-6 md:grid-cols-3"},Y={class:"space-y-1 md:col-span-1"},Z={class:"space-y-2 md:col-span-2"},I={class:"inline-flex items-center gap-2 mt-6"},tt={class:"space-y-1"},et={class:"pt-4 flex justify-end"},st=["disabled"],nt={__name:"Form",props:{stockItem:{type:Object,default:null},item:{type:Object,default:null},products:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},mode:{type:String,default:"create"}},setup(g){const c=g,q=["unidad","ud","L","ml","kg","g","pack","caja","bolsa","bote"],o=c.stockItem??c.item??null,p=b(()=>c.mode==="edit"||!!(o!=null&&o.id)),s=S({product_id:(o==null?void 0:o.product_id)??"",quantity:(o==null?void 0:o.quantity)??"",unit:(o==null?void 0:o.unit)??"",location_id:(o==null?void 0:o.location_id)??"",min_quantity:(o==null?void 0:o.min_quantity)??"",expires_at:o!=null&&o.expires_at?String(o.expires_at).substring(0,10):"",is_open:(o==null?void 0:o.is_open)??!1,notes:(o==null?void 0:o.notes)??""}),w=b(()=>p.value?"Editar registro de stock":"Nuevo registro de stock"),h=b(()=>p.value?"Guardar cambios":"Guardar stock");U(()=>s.product_id,x=>{if(!x)return;const t=c.products.find(i=>String(i.id)===String(x));t&&(p.value||(!s.unit&&t.default_unit&&(s.unit=t.default_unit),!s.quantity&&t.default_quantity!=null&&(s.quantity=t.default_quantity),!s.min_quantity&&t.default_quantity!=null&&(s.min_quantity=t.default_quantity)))});const j=()=>{p.value&&(o!=null&&o.id)?s.put(route("stock.update",o.id)):s.post(route("stock.store"))};return(x,t)=>(r(),V(F,null,{default:k(()=>[d(l(E),{title:w.value},null,8,["title"]),e("div",O,[e("div",T,[e("div",L,[e("div",null,[e("h1",z,u(w.value),1),t[8]||(t[8]=e("p",{class:"mt-1 text-sm text-slate-400"}," Registra cuántas unidades tienes de cada producto, dónde está y su fecha de caducidad. ",-1))]),d(l(N),{href:x.route("stock.index"),class:"text-sm text-slate-300 hover:text-slate-100"},{default:k(()=>[...t[9]||(t[9]=[C(" Volver al listado ",-1)])]),_:1},8,["href"])]),e("div",A,[e("form",{class:"space-y-6",onSubmit:M(j,["prevent"])},[e("div",D,[e("div",G,[t[11]||(t[11]=e("label",{for:"product_id",class:"block text-sm font-medium text-slate-800"}," Producto * ",-1)),a(e("select",{id:"product_id","onUpdate:modelValue":t[0]||(t[0]=i=>l(s).product_id=i),required:"",class:"block w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 focus:outline-none"},[t[10]||(t[10]=e("option",{value:""}," Selecciona un producto ",-1)),(r(!0),m(y,null,_(g.products,i=>(r(),m("option",{key:i.id,value:i.id},u(i.name),9,P))),128))],512),[[v,l(s).product_id]]),d(n,{class:"mt-1 text-xs text-rose-600",message:l(s).errors.product_id},null,8,["message"])]),e("div",$,[t[12]||(t[12]=e("label",{for:"quantity",class:"block text-sm font-medium text-slate-800"}," Cantidad * ",-1)),a(e("input",{id:"quantity","onUpdate:modelValue":t[1]||(t[1]=i=>l(s).quantity=i),type:"number",step:"0.01",min:"0",required:"",class:"block w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder-slate-400 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 focus:outline-none",placeholder:"1"},null,512),[[f,l(s).quantity]]),d(n,{class:"mt-1 text-xs text-rose-600",message:l(s).errors.quantity},null,8,["message"])])]),e("div",R,[e("div",H,[t[14]||(t[14]=e("label",{for:"unit",class:"block text-sm font-medium text-slate-800"}," Unidad ",-1)),a(e("select",{id:"unit","onUpdate:modelValue":t[2]||(t[2]=i=>l(s).unit=i),class:"block w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 focus:outline-none"},[t[13]||(t[13]=e("option",{value:""}," Misma unidad que el producto ",-1)),(r(),m(y,null,_(q,i=>e("option",{key:i,value:i},u(i),9,J)),64))],512),[[v,l(s).unit]]),d(n,{class:"mt-1 text-xs text-rose-600",message:l(s).errors.unit},null,8,["message"])]),e("div",K,[t[16]||(t[16]=e("label",{for:"location_id",class:"block text-sm font-medium text-slate-800"}," Ubicación ",-1)),a(e("select",{id:"location_id","onUpdate:modelValue":t[3]||(t[3]=i=>l(s).location_id=i),class:"block w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 focus:outline-none"},[t[15]||(t[15]=e("option",{value:""}," Sin ubicación asignada ",-1)),(r(!0),m(y,null,_(g.locations,i=>(r(),m("option",{key:i.id,value:i.id},u(i.name),9,Q))),128))],512),[[v,l(s).location_id]]),d(n,{class:"mt-1 text-xs text-rose-600",message:l(s).errors.location_id},null,8,["message"])]),e("div",W,[t[17]||(t[17]=e("label",{for:"min_quantity",class:"block text-sm font-medium text-slate-800"}," Cantidad mínima (para aviso) ",-1)),a(e("input",{id:"min_quantity","onUpdate:modelValue":t[4]||(t[4]=i=>l(s).min_quantity=i),type:"number",step:"0.01",min:"0",class:"block w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder-slate-400 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 focus:outline-none",placeholder:"Ej: 2"},null,512),[[f,l(s).min_quantity]]),t[18]||(t[18]=e("p",{class:"mt-1 text-xs text-slate-500"}," Si la cantidad baja de este número, el sistema marcará “Bajo mínimo”. ",-1)),d(n,{class:"mt-1 text-xs text-rose-600",message:l(s).errors.min_quantity},null,8,["message"])])]),e("div",X,[e("div",Y,[t[19]||(t[19]=e("label",{for:"expires_at",class:"block text-sm font-medium text-slate-800"}," Caducidad (opcional) ",-1)),a(e("input",{id:"expires_at","onUpdate:modelValue":t[5]||(t[5]=i=>l(s).expires_at=i),type:"date",class:"block w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 focus:outline-none"},null,512),[[f,l(s).expires_at]]),d(n,{class:"mt-1 text-xs text-rose-600",message:l(s).errors.expires_at},null,8,["message"])]),e("div",Z,[e("label",I,[a(e("input",{id:"is_open","onUpdate:modelValue":t[6]||(t[6]=i=>l(s).is_open=i),type:"checkbox",class:"h-4 w-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[B,l(s).is_open]]),t[20]||(t[20]=e("span",{class:"text-sm font-medium text-slate-800"}," Envase abierto ",-1))]),t[21]||(t[21]=e("p",{class:"text-xs text-slate-500"}," Marca esta opción si el paquete ya está empezado, para saber qué productos usar primero. ",-1)),d(n,{class:"mt-1 text-xs text-rose-600",message:l(s).errors.is_open},null,8,["message"])])]),e("div",tt,[t[22]||(t[22]=e("label",{for:"notes",class:"block text-sm font-medium text-slate-800"}," Notas (opcional) ",-1)),a(e("textarea",{id:"notes","onUpdate:modelValue":t[7]||(t[7]=i=>l(s).notes=i),rows:"3",class:"block w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder-slate-400 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 focus:outline-none",placeholder:"Ej: paquete empezado, usar primero..."},null,512),[[f,l(s).notes]]),d(n,{class:"mt-1 text-xs text-rose-600",message:l(s).errors.notes},null,8,["message"])]),e("div",et,[e("button",{type:"submit",disabled:l(s).processing,class:"inline-flex items-center justify-center rounded-xl bg-indigo-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm shadow-indigo-500/40 hover:bg-indigo-600 disabled:opacity-60 disabled:cursor-wait"},u(h.value),9,st)])],32)])])])]),_:1}))}};export{nt as default};
