import{s as q,A,j as g,c as P,w as u,a,b as e,d as x,h as U,g as r,i as j,l as y,f as b,o as l,t as d,H as F,k as h,F as w,m as k,E as v,p as V}from"./app-DvpENZoE.js";import{_ as $}from"./AuthenticatedLayout-CYNPxZX0.js";import{_ as m}from"./InputLabel-DaaaFQYz.js";import{_ as D}from"./TextInput-CW3PhMDC.js";import{P as E}from"./PrimaryButton-Dei7PzcQ.js";import"./ApplicationLogo-fLhE9Ixa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"py-8"},M={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6"},K={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},O={key:0,class:"rounded-2xl border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200 shadow-sm shadow-emerald-500/30"},T={class:"km-card p-4 sm:p-5"},H={class:"flex flex-col gap-4 md:flex-row md:items-end md:justify-between"},I={class:"w-full md:w-1/3"},z={class:"w-full md:w-1/3"},G=["value"],J={class:"w-full md:w-1/3 flex gap-3"},Q={class:"flex-1"},R={class:"flex-1"},W={class:"flex gap-2 justify-end"},X={class:"km-card overflow-hidden"},Y={key:0,class:"p-6 text-center text-slate-400 text-sm"},Z={key:1,class:"overflow-x-auto"},ee={class:"km-table"},te={class:"whitespace-nowrap text-sm font-medium text-slate-50"},se={class:"whitespace-nowrap text-sm text-slate-200"},oe={key:0},le={key:1,class:"text-slate-500"},ae={class:"whitespace-nowrap text-sm text-slate-300"},re={class:"text-sm text-slate-300"},ie={class:"whitespace-nowrap text-sm text-right"},de={class:"inline-flex gap-2"},ne=["onClick"],ve={__name:"Index",props:{products:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({search:"",location_id:"",sort:"name",direction:"asc"})}},setup(n){const c=n,f=q(),o=A({search:c.filters.search??"",location_id:c.filters.location_id??"",sort:c.filters.sort??"name",direction:c.filters.direction??"asc"}),B=g(()=>!!(f.props.flash&&f.props.flash.success)),N=g(()=>{var i;return((i=f.props.flash)==null?void 0:i.success)??""}),p=()=>{V.get(route("products.index"),{search:o.value.search||void 0,location_id:o.value.location_id||void 0,sort:o.value.sort,direction:o.value.direction},{preserveState:!0,preserveScroll:!0,replace:!0})},S=()=>{o.value={search:"",location_id:"",sort:"name",direction:"asc"},p()},C=i=>{confirm(`¿Seguro que quieres eliminar el producto "${i.name}"?`)&&V.delete(route("products.destroy",i.id),{preserveScroll:!0})};return(i,t)=>(l(),P($,null,{default:u(()=>[a(x(U),{title:"Productos"}),e("div",L,[e("div",M,[e("div",K,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl font-semibold text-slate-50"}," Productos "),e("p",{class:"mt-1 text-sm text-slate-400"}," Listado de productos que usas en tu cocina: nombre, unidad, cantidad base y ubicación habitual. ")],-1)),a(x(y),{href:i.route("products.create"),class:"inline-flex items-center rounded-xl border border-indigo-500/70 bg-indigo-500/15 px-4 py-2 text-sm font-medium text-indigo-100 shadow-sm shadow-indigo-500/30 hover:bg-indigo-500/25"},{default:u(()=>[...t[4]||(t[4]=[b(" Nuevo producto ",-1)])]),_:1},8,["href"])]),B.value?(l(),r("div",O,d(N.value),1)):j("",!0),e("div",T,[e("div",H,[e("div",I,[a(m,{for:"search",value:"Buscar por nombre",class:"text-slate-200"}),a(D,{id:"search",modelValue:o.value.search,"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.search=s),type:"text",class:"mt-1 block w-full",placeholder:"Buscar producto...",onKeyup:F(p,["enter"])},null,8,["modelValue"])]),e("div",z,[a(m,{for:"filter_location",value:"Filtrar por ubicación",class:"text-slate-200"}),h(e("select",{id:"filter_location","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.location_id=s),class:"mt-1 block w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2 text-sm text-slate-100 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"},[t[6]||(t[6]=e("option",{value:"",class:"bg-slate-900 text-slate-100"}," Todas las ubicaciones ",-1)),(l(!0),r(w,null,k(n.locations,s=>(l(),r("option",{key:s.id,value:s.id,class:"bg-slate-900 text-slate-100"},d(s.name),9,G))),128))],512),[[v,o.value.location_id]])]),e("div",J,[e("div",Q,[a(m,{for:"sort",value:"Ordenar por",class:"text-slate-200"}),h(e("select",{id:"sort","onUpdate:modelValue":t[2]||(t[2]=s=>o.value.sort=s),class:"mt-1 block w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2 text-sm text-slate-100 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"},[...t[7]||(t[7]=[e("option",{value:"name",class:"bg-slate-900 text-slate-100"}," Nombre ",-1),e("option",{value:"default_unit",class:"bg-slate-900 text-slate-100"}," Unidad ",-1)])],512),[[v,o.value.sort]])]),e("div",R,[a(m,{for:"direction",value:"Dirección",class:"text-slate-200"}),h(e("select",{id:"direction","onUpdate:modelValue":t[3]||(t[3]=s=>o.value.direction=s),class:"mt-1 block w-full rounded-xl border border-slate-700 bg-slate-950/60 px-3 py-2 text-sm text-slate-100 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"},[...t[8]||(t[8]=[e("option",{value:"asc",class:"bg-slate-900 text-slate-100"}," Ascendente ",-1),e("option",{value:"desc",class:"bg-slate-900 text-slate-100"}," Descendente ",-1)])],512),[[v,o.value.direction]])])]),e("div",W,[e("button",{type:"button",class:"text-sm text-slate-400 hover:text-slate-100",onClick:S}," Limpiar "),a(E,{type:"button",onClick:p},{default:u(()=>[...t[9]||(t[9]=[b(" Aplicar filtros ",-1)])]),_:1})])])]),e("div",X,[n.products.length?(l(),r("div",Z,[e("table",ee,[t[11]||(t[11]=e("thead",null,[e("tr",null,[e("th",null," Nombre "),e("th",null," Cantidad base "),e("th",null," Ubicación habitual "),e("th",null," Notas "),e("th",{class:"text-right"}," Acciones ")])],-1)),e("tbody",null,[(l(!0),r(w,null,k(n.products,s=>{var _;return l(),r("tr",{key:s.id},[e("td",te,d(s.name),1),e("td",se,[s.default_quantity?(l(),r("span",oe,d(s.default_quantity)+" "+d(s.default_unit),1)):(l(),r("span",le," — "))]),e("td",ae,d(((_=s.location)==null?void 0:_.name)??"Sin ubicación"),1),e("td",re,d(s.notes||"—"),1),e("td",ie,[e("div",de,[a(x(y),{href:i.route("products.edit",s.id),class:"text-xs px-3 py-1 rounded-lg border border-slate-600/80 text-slate-100 hover:bg-slate-800/80"},{default:u(()=>[...t[10]||(t[10]=[b(" Editar ",-1)])]),_:1},8,["href"]),e("button",{type:"button",class:"text-xs px-3 py-1 rounded-lg border border-rose-500/70 text-rose-300 hover:bg-rose-500/15",onClick:ce=>C(s)}," Borrar ",8,ne)])])])}),128))])])])):(l(),r("div",Y," No hay productos que coincidan con los filtros actuales. "))])])])]),_:1}))}};export{ve as default};
